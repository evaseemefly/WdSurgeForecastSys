# WdSurgeForecastSys
温带风暴潮服务发布系统

[部署文档](./DEPLOY.md)
[前端项目文档](https://github.com/evaseemefly/GlobalSurgeCli/blob/main/%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD%E4%BB%8B%E7%BB%8D.md)

[系统功能介绍]([GlobalSurgeCli/主要功能介绍.md at main · evaseemefly/GlobalSurgeCli (github.com)](https://github.com/evaseemefly/GlobalSurgeCli/blob/main/主要功能介绍.md))

### **温带风暴潮辅助决策系统功能介绍**

- 23-09-18 : 功能介绍后续详见 [功能介绍]([GlobalSurgeCli/主要功能介绍.md at main · evaseemefly/GlobalSurgeCli (github.com)](https://github.com/evaseemefly/GlobalSurgeCli/blob/main/主要功能介绍.md))

目录:

[TOC]



本系统为基于温带风暴潮数据预报的可视化交互系统。

可根据温带风暴潮模式进行符合风暴潮预报流程的交互式预报可视化平台。

采用了自主化前端可视化平台 **oceanflow**  的部分组件 (*[本人为开源作者](https://github.com/evaseemefly)*)，本系统前端可视化部分已经开源([地址](https://github.com/evaseemefly/GlobalSurgeCli)）。

![001](/docs/imgs/icons/of_earth_bold.png)

本系统采用前后端分离技术，建立B/S架构的WebGIS可视化平台。

前端主要采用`开源WebGIS引擎`，`Vue`组件化框架，引入了`echarts`,`elementui`等前端开源组件，采用`Vue2.x` 与 `TypeScript`实现前端系统。

后端服务系统尝试采用全新的基于`starlette`与`pydantic`的`fastapi`框架提供数据发布服务(之前的系统后端采用`django`+`djang rest framework`作为主体框架)。
数据处理及定时任务分别采用了：`pandas+numpy+xarray`等基于python的主流程数据处理相关库；数据库ORM模型采用`sqlalchemy2.0`(以前的系统采用了1.4)；分布式作业系统`Celery`+`RabbitMQ`(消息队列)。

数据库采用`mysql`(关系型数据库)及`mongodb`(非关系型数据库)。



#### **本系统主要功能:**

1. 以栅格或等值面图层的形式加载168小时内的最大增水场预报结果;
2. 加载7天的各站风暴增水极值及总潮位极值，及对应警报颜色等级等信息，可快速提取整个过程中各站的增水及总潮位极值情况；
3. 建立各个站点与不同时次的过程预报的关系；
4. 加载指定站点指定发布时间的24-168小时的增水及对应天文潮及总潮位情况.

#### **本系统的优势：**

1. 风暴潮室自主研发；
2. 可针对风暴潮预报业务做有针对性的设计与修改，更加贴合预报实际；
3. 针对预报业务改善了操作流程；
4. 后台定时获取预报产品，并自动进行后续处理入库提取等相应操作；
5. 对预报产品进行留档，并提供多种统计分析功能;
6. 由于采用B/S架构，可以方便预报员在中心局域网范围内访问本系统，快速查看温带风暴潮预报结果.

#### **未来计划:**

1. 加入ec及中心风场的可视化显示:流线、栅格图层、等值面图层、风力杆图层等。

#### **系统效果图及功能简述:**

- [ ] ##### 加载最大增水场栅格图层

  通过选择发布时间，加载未来168小时的最大增水场栅格图层；并与右侧的色标建立映射关系.

![001](/docs/fd_imgs/001.png)

- [ ] ##### 加载最大增水场等值面图层

  可通过底部的场图层切换按钮在栅格图层与等值面图层之间进行切换.

![002](/docs/fd_imgs/010.png)

- [ ] ##### 加载指定发布时间发布的未来168小时内的各个站点最大增水、总潮位极值及对应预警等级

  根据当前选定的发布时间，通过点击左上角的潮位站极值列表，加载所有站点的 增水总潮位|发生事件 ， 总潮位(天文潮+增水)|发生时间，提供快速预览功能。点击可加载对应站点的预报过程曲线图。

![002](/docs/fd_imgs/002.png)

- [ ] ##### 选定指定站点加载对应的(24-168小时内的增水及天文潮详情)

  支持通过地图页面直接点击站点或通过站点极值列表点击展开并加载对应站点的风暴增水、天文潮、总潮位及对应的四色警戒潮位标识。详情查询主要包含了增水曲线(窗体上半部分)及逐时*的对应数值(窗体下半部分)

  <u>*:由于预报时效为168小时，本窗口展示的逐时数据为：以7小时为步长提取的最大值集合.可通过修改时效动态调整.</u>

![002](/docs/fd_imgs/003.png)

- [ ] ##### 可通过位移按钮对风暴增水按照起始时间进行-+x小时的位移操作

  本系统新加入的将风暴增水按时间轴进行时间增减的功能。可以查看风暴增水提前或滞后所导致叠加天文潮后的总潮位的变化情况.

![004](/docs/fd_imgs/004.png)

#### 鸣谢:

*感谢风暴潮室的全体同事对本系统的大力支持。*